<!DOCTYPE html>
<html>
    <head>
    <title>旅游 签证 新增签证-基本信息</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/static/css/smoothness/jquery-ui-1.10.3.custom.css">
    <link rel="stylesheet" href="/static/css/kendo.common.min.css" />
        
    <link href="/static/css/kendo.common.css" rel="stylesheet" />
    <link href="/static/css/kendo.gray.css" rel="stylesheet" />
    <link href="/static/css/common.css" rel="stylesheet" />
    <link href="/static/css/supplier.css" rel="stylesheet" />
    <link href="/static/css/supplier_common.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/kendo.reset.css" rel="stylesheet" />
    <link href="/static/css/supplier_visa.css" rel="stylesheet" />

    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/kendo.web.js"></script>
    <script type="text/javascript" src="/static/js/cultures/kendo.culture.zh-CN.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery-ui-1.10.3.custom.js"></script>
    <script type="text/javascript" src="/static/js/global.js"></script>
    <script type="text/javascript" src="/static/js/DateControl.js"></script>
    <script type="text/javascript" src="/static/js/vendor/underscore.js"></script>
    <script type="text/javascript" src="/static/js/supplier/supplier_travel.js"></script>

    <!--[if IE]>
    <script src="/static/js/html5.js"></script>
    <![endif]-->

    <!--[if lt IE 8]> 
    <link rel="stylesheet" href="/static/css/ie.css" /> 
    <script type="text/javascript" src="/static/js/vendor/IE7.min.js"></script> 
    <![endif]-->
    </head>
    <style type="text/css">
      .k-calendar .k-content .k-link {
        padding: 0;
      }
    </style>
<body>

    <div class="bg-header-repeat">
        <div class="bg-header-top"></div>
        <div class="navi-split-line"></div>
        <div class="main-header"></div>
    </div>

    <div id="container" class="new-container">
        <div class="header-top-center">
            <div class="head-left">
                <div class="supplier-logo"></div>
            </div>
            <ul class="first-navi">
                <li class="first-navi-li"><a href="javascript:void(0);">国内机票</a></li>
                <li class="first-navi-li"><a href="javascript:void(0);">国际机票</a></li>
                <li class="first-navi-li" style="width:70px;"><a href="javascript:void(0);">旅游</a></li>
                <li class="first-navi-li first-navi-active"><a href="javascript:void(0);" style="width:70px;">签证</a>
                    <ol class="second-navi">
                        <li class="second-navi-li second-navi-active"><a href="javascript:void(0);">签证产品管理</a>
                            <div class="navi-slide-hover" style="height:5px;"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">签证进度管理</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">订单管理</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                    </ol>
                </li>
                <li class="first-navi-li"><a href="javascript:void(0);">财务管理</a></li>
                <li class="user-setting-nav" style="display:none;">
                    <ol class="second-navi">
                        <li class="second-navi-li"><a href="javascript:void(0);">我的账号</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">公司信息</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">员工管理</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">角色管理</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);">账户设置</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                        <li class="second-navi-li"><a href="javascript:void(0);"><span style="font-size:14px;">OFFICE</span>管理</a>
                            <div class="navi-slide-hover"></div>
                        </li>
                    </ol>
                </li>
            </ul>
            <div class="head-right">
                <ul class="feature">
                    <li class="notice-icon-active"></li>
                    <li class="split-line"></li>
                    <li class="person-info">
                        <span class="person-icon"></span>
                        <span class="person-name" title="zhaoshuaigeng12312321">zhaoshuaigeng12312321</span>
                        <a class="logout" href="javascript:void(0);">退出</a>
                        <span class="user-setting">设置</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="clear"></div>
        <div id="sub_menu_bar"></div> 
    
     <div class="mainContent" class="mainContent travelModule">

        <div class="top-pass-block">
            <ul class="third-navi">
                <li class="third-navi-li">
                    <a class="blueFonts" href="javascript:void(0);"><i class="detailsIcon"></i>新增签证</a>
                </li>
                <li class="third-navi-li">
                    <a href="javascript:void(0);">基本信息</a>
                </li>
                <li class="third-navi-li">
                    <a href="javascript:void(0);">材料信息</a>
                </li>
                <li class="third-navi-li third-navi-active">
                    <a href="javascript:void(0);">价格信息</a>
                </li>
                <li class="third-navi-li">
                    <a href="javascript:void(0);">描述信息</a>
                </li>
            </ul>
        </div>

         <div class="mainBodyHead clearfix">
            <div class="lineNum">
                <span>签证编号：23569</span>
                <span style="margin-left: 30px;">签证名称：美国个人旅游签证（上海送签），免面试</span>
            </div>
            <span class="mainBodyOper">
                <span style="margin-right: 10px;vertical-align: middle;"><a href="#">日志</a></span>
                <span>
                    <a class="adaptiveButton brightBtn normalButton">
                        <span class="left"></span>
                        <span class="center center_2">保存信息</span>
                        <span class="right"></span>
                    </a>
                </span>
                <span>
                    <a class="adaptiveButton brightBtn brightBtn-blue">
                        <span class="left"></span>
                        <span class="center center_2">提交审核</span>
                        <span class="right"></span>
                    </a>
                </span>
            </span>
        </div>

        <div class="mainBodyCont" style="margin-bottom:40px;">
            <div class="cont-head">
              <span style="color:#333;font-size:16px;">设置售卖日期</span>
              <span style="color:#999;padding-left:20px;">请点击日历上的日期设置团期 或者 </span>
              <span>
                <a class="adaptiveButton brightBtn normalButton batchOpen">
                    <span class="left"></span>
                    <span class="center center_2">批量开启</span>
                    <span class="right"></span>
                </a>
                <a class="adaptiveButton brightBtn normalButton batchClose">
                    <span class="left"></span>
                    <span class="center center_2">批量关闭</span>
                    <span class="right"></span>
                </a>
              </span>
            </div>
            <div class="double-calendar-block clearfix">
              <div class="leftDateBlock">
                  <div class="calendarOperation">
                      <div class="calendarMonthLeft"></div>
                      <div class="calendarDate cd1"></div>
                  </div>
                  <div class="calendar" class="calendarContainer" id="calendar01" >
                  </div>
              </div>

              <div class="rightDateBlock">
                  <div class="calendarOperation">
                      <div class="calendarDate cd2"></div>
                      <div class="calendarMonthRight"></div>
                  </div>
                  <div class="calendar" class="calendarContainer" id="calendar02">
                  </div>
              </div>
            </div>
        </div>
     </div>
 </div>

    <div id="extFooter">
        <div>
            <p>
            <a href="javascript:void(0);">关于我们</a>&nbsp;|
            <a href="javascript:void(0);">微博</a>&nbsp;|
            <a href="javascript:void(0);">服务条款</a>&nbsp;|
            <a href="javascript:void(0);">隐私政策</a>&nbsp;|
            </p>
            <p>客户服务热线:400-720-6666</p>
        </div>
    </div>
    <script type="text/x-kendo-template" id="ac-journal-template">
        <table class="commonTab">
            <colgroup>
                <col width="350"/>
                <col width="140"/>
                <col width="70"/>
            </colgroup>
            <thead>
            <th>操作记录</th>
            <th>操作时间</th>
            <th>操作人</th>
            </thead>
            <tbody>
            <tr>
                <td>
                    <div class="limitWidth">操作记录操作记录操作记录操作记录操操作作记录操作记录操作记录操作</div>
                </td>
                <td>2014-09-21  18:01</td>
                <td>客服</td>
            </tr>
            <tr>
                <td>
                    <div class="limitWidth">操作记录操作记录操作记录操作记录操操作作记录操作记录操作记录操作</div>
                </td>
                <td>2014-09-21  18:01</td>
                <td>admin</td>
            </tr>
            <tr>
                <td>
                    <div class="limitWidth">操作记录操作记录操作记录操作记录</div>
                </td>
                <td>2014-09-21  18:01</td>
                <td>admin</td>
            </tr>
            <tr>
                <td>
                    <div class="limitWidth">操作记录操作记录操作记录操作记录</div>
                </td>
                <td>2014-09-21  18:01</td>
                <td>admin</td>
            </tr>
            <tr>
                <td>
                    <div class="limitWidth">操作记录操作记录操作记录操作记录</div>
                </td>
                <td>2014-09-21  18:01</td>
                <td>admin</td>
            </tr>
            </tbody>
        </table>
        <div class="grid-table-pagination">
              <span class="grid-table-count">
                  共 <em>132</em> 条记录
              </span>
              <span>
                  <a href="javascript:void(0);" class="prev">&nbsp;</a>
              </span>
              <span class="links">
                  <a href="javascript:void(0);">1</a>
                  <a href="javascript:void(0);">2</a>
                  <a href="javascript:void(0);" class="current">3</a>
                  <a href="javascript:void(0);">4</a>
                  <a href="javascript:void(0);">5</a>
                  <a href="javascript:void(0);" class="ellipsis">...</a>
                  <a href="javascript:void(0);">50</a>
              </span>
              <span>
                  <a href="javascript:void(0);" class="next">&nbsp;</a>
              </span>
        </div>
        <div class="pullRightStyle">
            <a class="supplierButton brightRedBig_btn">
                <span class="left"></span>
                <span class="center center_1">关 闭</span>
                <span class="right"></span>
            </a>
        </div>
    </script>

    <script id="cell-template" type="text/x-kendo-template">
      # var tmpArr = _.pluck(dates, 'date'); 
        var dateStr = data.date.Format("yyyy/MM/dd"); #
      # if($.inArray(dateStr, tmpArr) != -1){ #
        # for (var i = 0; i < dates.length; i++) { #
          # if (dates[i].date == dateStr && !dates[i].status) { #
              # if (!dates[i].expired) { #
                <div class="cal-cell-container open">
                  <p class="cal-date">#= data.value #</p>
                  <p class="cal-price"><em>1500</em>起</p>
                  <p class="cal-oper">开启</p>
                </div>
            # } else { #
                <div class="cal-cell-container open">
                  <p class="cal-date">#= data.value #</p>
                  <p class="cal-price"><em>1500</em>起</p>
                </div>
            # } #
          # } else if (dates[i].date == dateStr && dates[i].status) { #
            <div class="cal-cell-container close">
              <p class="cal-date">#= data.value #</p>
              <p class="cal-price"><em>1500</em>起</p>
              <p class="cal-oper">关闭</p>
            </div>
          # } #
        # } #      
      # } else { #
        <div class="cal-cell-container">
          <p class="cal-date reset-date-top">#= data.value #</p>
        </div>
      # } #      
    </script>

    <script id="close-tip-template" type="text/x-kendo-template">
      <div class="closeTipBlock"><i></i>已关闭!</div>
    </script>

    <script id="open-tip-template" type="text/x-kendo-template">
      <div class="openTipBlock"><i></i>已开启!</div>
    </script>

    <script id="batch-open-template" type="text/x-kendo-template">
      <div class="batchOperWin">
        <p>
          <span>日期：</span>
          <input type="text" class="dpUlt datepicker"> - 
          <input type="text" class="dpUlt datepicker">
        </p>
        <p class="batch-win-btn">
          <a class="adaptiveButton brightRed_btn">
              <span class="left"></span>
              <span class="center" style="padding:0 15px;font-size:14px;">批量开启</span>
              <span class="right"></span>
          </a>
          <a class="cancelLink" href="javascript:void(0);">取消</a>
        </p>
      </div>
    </script>

    <script id="batch-close-template" type="text/x-kendo-template">
      <div class="batchOperWin">
        <p>
          <span>日期：</span>
          <input type="text" class="dpUlt datepicker"> - 
          <input type="text" class="dpUlt datepicker">
        </p>
        <p class="batch-win-btn">
          <a class="adaptiveButton brightRed_btn">
              <span class="left"></span>
              <span class="center" style="padding:0 15px;font-size:14px;">批量关闭</span>
              <span class="right"></span>
          </a>
          <a class="cancelLink" href="javascript:void(0);">取消</a>
        </p>
      </div>
    </script>
    
<script>
    var today = new Date(),
        toDate=today;
    var nextMonthDate=new Date(today.getFullYear(),toDate.getMonth()+1,toDate.getDate());

    $(function(){
        var ac_window = new PopWindow('.ac-journal',{
            title:'日志',
            width:'600',
            template:'#ac-journal-template'
        }).init();

        var batchOpenWin = new PopWindow('.batchOpen',{
            title:'批量开启',
            width:'400',
            template:'#batch-open-template'
        }).init();

        var batchCloseWin = new PopWindow('.batchClose',{
            title:'批量关闭',
            width:'400',
            template:'#batch-close-template'
        }).init();

        $("select").kendoDropDownList();

        $(".datepicker").datepicker({
            showDay:true,
            numberOfMonths:[1,2],
            firstDay:0,
            showButtonPanel :true
        });

        //  双日历初始化及相关操作  --开始 

        var dataArr = [{
          date: "2014/12/04",
          status: false,  // true 当前为开启状态， false 当前为关闭状态
          expired: false  //  false 当前时间未过期，true 当前时间已过期，过期的时间状态一定是关闭状态
        }, {
          date: "2014/12/23",
          status: true,
          expired: false
        }, {
          date: "2014/12/24",
          status: true,
          expired: false
        },{
          date: "2014/12/25",
          status: false,
          expired: true
        }, {
          date: "2015/01/13",
          status: true,
          expired: false
        }, {
          date: "2015/02/10",
          status: false,
          expired: false
        }];
        
        // 双日历初始化
        var calendar=$("#calendar01").kendoCalendar({
            culture:"zh-CN",
            value:new Date(),
            footer:false,
            dates: dataArr,
            month: {
              content: $("#cell-template").html()
            }
        }).data("kendoCalendar");

        var calendar1=$("#calendar02").kendoCalendar({
            culture:"zh-CN",
            value:nextMonthDate,
            footer:false,
            dates: dataArr,
            month: {
              content: $("#cell-template").html()
            }
        }).data("kendoCalendar");

        clearOtherMonthCont();
        changeCalendarDateInfo(toDate);

        //  日历翻动  上一月 下一月
        $(".calendarMonthRight").click(function(){
            if(!$(this).hasClass("disabled")){
                toDate=toDate.DateAdd("m",+1);
                nextMonthDate=nextMonthDate.DateAdd("m",+1);

                calendar.navigate(toDate,"month");
                calendar1.navigate(nextMonthDate,"month");

                clearOtherMonthCont();
                changeCalendarDateInfo(toDate);
            }
        });

        $(".calendarMonthLeft").click(function(){
            if(!$(this).hasClass("disabled")) {
                toDate=toDate.DateAdd("m",-1);
                nextMonthDate=nextMonthDate.DateAdd("m",-1);

                calendar.navigate(toDate,"month");
                calendar1.navigate(nextMonthDate,"month");

                clearOtherMonthCont();
                changeCalendarDateInfo(toDate);
            }
        });

        // hover 显示相关操作
        $("body").delegate(".cal-cell-container", "mouseenter", function(){
          $(this).find(".cal-oper").css("visibility", "visible");
        });

        $("body").delegate(".cal-cell-container", "mouseleave", function(){
          $(this).find(".cal-oper").css("visibility", "hidden");
        });

        //  开启 关闭 操作
        $("body").delegate(".cal-cell-container.open .cal-oper", "click", function(){
          var that = $(this);

          openTipLayer.open();

          setTimeout(function(){
            openTipLayer.close();
            that.parent(".cal-cell-container").removeClass("open").addClass("close");
            that.html("关闭");
          }, 1500);
        });

        $("body").delegate(".cal-cell-container.close .cal-oper", "click", function(){
          var that = $(this);

          closeTipLayer.open();

          setTimeout(function(){
            closeTipLayer.close();
            that.parent(".cal-cell-container").removeClass("close").addClass("open");
            that.html("开启");
          }, 1500);

        });

        // 开启 关闭 操作后提示框
        var closeTipLayer = new FloatLayer({
            trigger: ".cal-cell-container.close .cal-oper",
            template: "#close-tip-template",
            type: 'click',
            openEffect: "fadeIn",
            closeEffect: "fadeOut",
            offsetX: -50,
            offsetY: 18
        });

        var openTipLayer = new FloatLayer({
            trigger: ".cal-cell-container.open .cal-oper",
            template: "#open-tip-template",
            type: 'click',
            openEffect: "fadeIn",
            closeEffect: "fadeOut",
            offsetX: -50,
            offsetY: 18
        });

        //  双日历初始化及相关操作  --结束

    })
        
        //  设置日历头部显示的月份
        function changeCalendarDateInfo(toDate){
            $(".calendarDate.cd1").html(toDate.getFullYear()+"年"+(toDate.getMonth()+1)+"月");
            $(".calendarDate.cd2").html(nextMonthDate.getFullYear()+"年"+(nextMonthDate.getMonth()+1)+"月");
        }

        // 只显示当前月份的日期，不跨月显示
        function clearOtherMonthCont() {
          $(".k-other-month a").html("");
          $(".k-other-month a").css("height","51px");
        }
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>天地行 采购商 用户中心 国际订单列表</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     
    <link rel="stylesheet" href="../../static/css/smoothness/jquery-ui-1.10.3.custom.css" />
     
    <link rel="stylesheet" href="../../static/css/store_reset.css" media="all" />
    <link rel="stylesheet" href="../../static/css/distributor.css" media="screen" />
    <link rel="stylesheet" href="../../static/css/store_ucenter.css" media="screen" />

    <link rel="stylesheet" href="../../static/css/kendo.common.min.css" />
    <link rel="stylesheet" href="../../static/css/kendo.store.css" />
    <link rel="stylesheet" href="../../static/css/blue_skin.css"/>
    
    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>    
    <script type="text/javascript" src="../../static/js/kendo.web.js"></script>
    <script type="text/javascript" src="../../static/js/cultures/kendo.culture.zh-CN.min.js"></script>
    <script type="text/javascript" src="../../static/js/global.js"></script>    

    <!--[if IE]>
    <script src="../../static/js/html5.js"></script>
    <![endif]-->
    <script src="../../static/js/jquery-ui-1.10.3.custom.js"></script>
	<script src="../../static/js/jquery.ui.datepicker-zh-CN.js"></script>
    
    <script type="text/javascript" src="../../static/js/store/store.js"></script>
    <script src="../../static/js/swfup/swfupload.js"></script>
    <script src="../../static/js/swfup/swfupload.queue.js"></script>
    <script type="text/javascript" src="../../static/js/swfup/fileprogress_cgs.js"></script>
</head>
<body>

<div class="main-wrapper">
<header class="main-header">
    <a class="logo" href="/"><h1>天地行</h1></a>
    <nav class="main-nav">
        <ul class="clearfix">
            <li><a href="#">国内机票</a></li>
            <li class="active"><a href="#">国际机票</a></li>
            <li><a href="#">订单</a></li>
        </ul> 
    </nav>
    <nav class="main-links">
        <ul class="clearfix">
            <li class="first"><a href="#">订单管理</a></li>
            <li><a href="#">电子钱包</a></li>
            <li><a href="#">统计报表</a></li>
            <li><a href="#">系统设置</a></li>
            </ul>
        </nav>
    <nav class="customerInfo">
        你好，<span>Angle@66454</span><i class="customerInfo_Control"></i>
    </nav>
</header>
    <div class="homePageBGContainer">
        <div class="homePageBG_left"></div>
        <div class="homePageBG_right"></div>
        <div class="homePageBG_international"></div>
    </div>
    <section class="homePagebodyContainer clearfix">
        <ul class="homePagePanelMenu">
            <li data-role="ctype" data-index="1" data-group="qtab" class="current">
                <i class="ico_plane"></i>机票预订
            </li>
            <li data-role="ctype" data-index="2" data-group="qtab">
                <i class="ico_pnr"></i>PNG导入
            </li>
        </ul>
        <div class="homePageContentContainer">
            <div class="querytab-flight querytab" data-role="ctype-item" data-index="1" data-group="qtab">
                <ul>
                    <li class="trip_type gap">
                        <strong>航程类型</strong>
                        <label><input type="radio" data-role="ctype" data-group="trip_type" data-index="c1" name="flight_type" checked=""><span>单程</span></label>
                        <label><input type="radio" class="isDouble" data-role="ctype" data-group="trip_type" data-index="c1" name="flight_type"><span>往返</span></label>
                        <label><input type="radio" class="isDouble" data-role="ctype" data-group="trip_type" data-index="c2" name="flight_type"><span>多程（含缺口）</span></label>
                        <span class="text1" style="display:none;" data-role="ctype-item" data-group="trip_type" data-index="c2"> 超过6段航程,请联系机票专家组。 <s class="tel">400-720-6666</s></span>
                    </li>
                    <li class="round_trip clearfix">
                        <div class="single_trip" data-role="ctype-item" data-index="c1" data-group="trip_type">
                            <b class="xchange"></b>
                            <table>
                                <colgroup>
                                    <col class="col1">
                                    <col class="col2">
                                </colgroup>
                                <tr>
                                    <td>
                                        <label><span class="text">出发城市</span><input class="city_ac" type="text" name="" /></label>
                                    </td>
                                    <td>
                                        <label><span class="text">出发日期</span><span class="datePickerContainer"><input placeholder="yyyy-mm-dd" type="text" name="" class="datepicker" /><i></i></span></label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label><span class="text">到达城市</span><input class="city_ac" type="text" name="" /></label>
                                    </td>
                                    <td>
                                        <label class="return_date disabled"><span class="text">返程日期</span><span class="datePickerContainer"><input placeholder="yyyy-mm-dd" type="text" name="" class="datepicker" disabled="disabled" /><i></i></span></label>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="muti_trip" data-role="ctype-item" data-index="c2" style="display:none;" data-group="trip_type">
                            <script type="text/x-kendo-template" id="ac-add-line-template">
                                <tr>
                                    <td><span class="hitext index_num">1</span></td>
                                    <td>出发城市</td>
                                    <td><input type="text" style="width:145px;" value="" class="city_ac"/></td>
                                    <td>到达城市</td>
                                    <td><input type="text" style="width:145px;" value="" class="city_ac"/></td>
                                    <td>出发日期</td>
                                    <td><input type="text" style="width:145px" value="" placeholder="yyyy-mm-dd" class="datepicker"/></td>
                                    <td>
                                        <div class="op">
                                            <b class="ac-remove-line"></b>
                                        </div>
                                    </td>
                                </tr>
                            </script>
                            <table>
                                <colgroup>
                                    <col class="col1">
                                    <col class="col2">
                                    <col class="col3">
                                    <col class="col4">
                                    <col class="col5">
                                    <col class="col6">
                                    <col class="col7">
                                    <col class="col8">
                                </colgroup>
                                <tbody>
                                <tr>
                                    <td><span class="hitext index_num">1</span></td>
                                    <td>出发城市</td>
                                    <td><input type="text" value="" style="width:145px" class="city_ac"/></td>
                                    <td>到达城市</td>
                                    <td><input type="text" value="" style="width:145px" class="city_ac"/></td>
                                    <td>出发日期</td>
                                    <td><input type="text" value="" style="width:145px" placeholder="yyyy-mm-dd" class="datepicker"/></td>
                                    <td>
                                        <div class="op">
                                            <!--<b class="ac-remove-line">删除</b> -->
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><span class="hitext index_num">2</span></td>
                                    <td>出发城市</td>
                                    <td><input type="text" value="" style="width:145px" class="city_ac"/></td>
                                    <td>到达城市</td>
                                    <td><input type="text" value="" style="width:145px" class="city_ac"/></td>
                                    <td>出发日期</td>
                                    <td><input type="text" value="" style="width:145px" placeholder="yyyy-mm-dd" class="datepicker"/></td>
                                    <td>
                                        <div class="op">
                                            <!-- <b class="ac-remove-line">删除</b> -->
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="row-add-line">
                                <b class="muti_add ac-add-line"><i class="icon icon-plus"></i>添加航程</b>
                            </div>
                        </div>

                        <h4 class="underline-title"><span><i class="icon icon-arrows"></i>高级搜索</span></h4>
                        <table class="advanced_search clearfix" style="width:100%">
                            <tr>
                                <td class="col1">
                                    <label><span class="text">舱位等级</span><select data-role="dropdownlist" style="height: 43px;">
                                        <option selected="" value="经济舱">经济舱</option>
                                        <option value="超级经济舱">超级经济舱</option>
                                        <option value="商务舱">商务舱</option>
                                        <option value="头等舱">头等舱</option>
                                    </select>
                                    </label>
                                </td>
                                <td class="col2">
                                    <label><span class="text">航空公司</span><input data-role="combobox" data-filter="contains" data-suggest="true" placeholder="编号/中文" data-text-field="text" data-value-field="value"  data-source='[{ text: "南航", value: "8U" }, { text: "国航", value: "BK" }]' class="sel_airlines" style="border:0" />

                                    </label>

                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label><span class="text">乘客类型</span><select data-role="dropdownlist">
                                        <option>成人</option>
                                        <option>儿童</option>
                                        <option>婴儿</option>
                                        <option>不限</option>
                                    </select>
                                    </label>
                                </td>
                                <td>
                                    <label class="sail_type"><input type="radio" checked="" name="type" />全部</label>
                                    <label class="sail_type"><input type="radio" name="type"/>直飞</label>
                                    <label class="sail_type"><input type="radio" name="type"/>中转</label>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <div class="btn_area">
                                        <a class="adaptiveButton brightRed_btn">
                                            <span class="left"></span>
                                            <span class="center c1" style="padding:8px 80px;">搜&nbsp;索</span>
                                            <span class="right"></span>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </li>
                </ul>

                <!-- <div class="btn_area">
                    <a class="adaptiveButton brightRed_btn">
                        <span class="left"></span>
                        <span class="center c1" style="padding:8px 80px;">搜&nbsp;索</span>
                        <span class="right"></span>
                    </a>
                </div> -->
            </div>

            <div class="querytab-pnr" data-role="ctype-item" data-index="2" data-group="qtab" style="display:none;">
                <ul class="black_booking">
                    <li class="passenger gap">
                        <span class="subline">乘客类型</span>
                        <label><input type="radio" name="passenger_type" data-role="ctype" data-group="passenger_type" checked /><span>成人</span></label>
                        <label><input type="radio" name="passenger_type" data-role="ctype" data-group="passenger_type" data-index="c1" /><span>儿童</span></label>
                        <label><input type="radio" name="passenger_type" data-role="ctype" data-group="passenger_type" /><span>学生</span></label>
                        <label><input type="radio" name="passenger_type" data-role="ctype" data-group="passenger_type" /><span>团队</span></label>
                        <label><input type="radio" name="passenger_type" data-role="ctype" data-group="passenger_type" data-index="c2"/><span>其他类型</span></label>
                        <select name="" id="" data-role="dropdownlist" style="width:80px;">
                            <option value="">青年</option>
                        </select>
                    </li>

                    <li class="passenger gap" data-role="ctype-item" data-group="passenger_type" data-index="c1" style="display:none;margin-top:15px;">
                        <div class="errorArea">
                            <span>成人票号 </span><input type="text" id="withTypePnr" placeholder="票号" style="width: 160px;height:43px;font-size:16px;"/><span class="errorMsg">成人票号不能为空</span>
                            <span class="ph_tips" style="font-size:14px;color:#FF4D00;">请确认儿童有成人陪伴，提供成人票号。如是无成人陪伴儿童，请向航空公司申请。</span>
                        </div>
                    </li>
                    
                    <li data-role="ctype-item" data-group="passenger_type" data-index="c2" style="display: none;margin-top:15px;">
                        <span class="subline">上传证件</span>

                        <a class="upload-button" href="javascript:;"><span id="UploaderPlaceholder_1"></span></a>
                        <span allowSize="1000mb" allowFile="*.jpg;*.jpeg;*.png;*.iso" class="Uploader fl-uploader">该乘客类型需传证明文件，支持上传多个</span>

                        
                    </li>

                    <li class="ways clearfix" style="margin-top: 15px;">
                        <div class="col">
                            <p class="black-paste-wrapper">
                                <textarea class="black-paste">
使用方法:
1. 请使用您的Eterm系统提取PNR内容。
2. 再执行PAT:A指令,将全部内容复制,并粘贴到黑色输入框内。
3. 团队从RT:N/编码开始复制到PAT:A结果的所有内容。
4. 根据航空公司出票要求,PNR内容中必须备注手机号码。
5. 注意:复制的内容建议从RT编码开始复制到PAT:A结果的所有内容。儿童PNR编码,请走儿 童订单专用通道。
                                </textarea>
                            </p>
                        </div>
                        <div class="col pnr-notes">
                            <strong class="text2">注意事项：</strong>
                            <ul>
                                <li class="text3">重要更新提示：各航司预留编码取消输入CT项，按照OSI项格式输入联系方式。<br> 指令：OSI 航空公司代码 CTCT您的手机号码（一个PNR只允许出现一个OSI项。<br>   例如：OSI MU CTCT138*****888</li>
                                <li>支持成人单程、往返程、联程、缺口程及团队PNR编码导入。</li>
                                <li>该PNR姓名组正确。</li>
                                <li>航段组正确、舱位状况正确。</li>
                                <li class="text3">每个乘客均有真实的SSR FOID 项输入。</li>
                                <li>该PNR不能包含票价组项，如FC/FN/FP。</li>
                                <li>JD航空，一个PNR只允许一位乘机人。</li>
                            </ul>
                            <div class="btn_buildOrderContainer">
                                <a class="adaptiveButton brightRed_btn">
                                    <span class="left"></span>
                                    <span class="center c1" style="padding:8px 80px;">创建订单</span>
                                    <span class="right"></span>
                                </a>
                            </div>
                        </div>
                        <div class="col uploader-wrapper">
                            <div class="uploader-inner">
                                <div class="fl-uploader-error">上传文件失败，请重新上传（失败原因<i class='fl-error'>&#12288;
                                    <div class="fl-uploader-wrap message_ct">
                                        <div class="arrow arrow_north"></div>
                                        <div class="message_body fl-uploader-errfiles"></div>
                                    </div></i>）</div>
                                <div class="fl-upholder" id="UploaderProgress_1"></div>
                            </div>
                        </div>
                    </li>
                </ul>
        </div>
        </div>
    </section>
<footer class="main-footer" style="margin-top: 635px">
    <center class="copyright">
        Copyright &copy; 2012 天地行 All Rights Reserved.     沪ICP备08101503号 
    </center>
</footer>
</div>
<script type="text/html" id="customerInfoControlTemplate">
    <div class="customerInfoPop">
        <a class="adaptiveButton brightRed_btn">
            <span class="left"></span>
            <span class="center c1">搜&nbsp;索</span>
            <span class="right"></span>
        </a>
        <a href="javascript:;" class="cic_logout">退出</a>
    </div>
</script>
<script type="text/x-kendo-template" id="city_popup">
    <div id="gn-tabstrip" class="tcy_tabstrip">
<span class="tcy_title">
    热门城市/国家（支持中文名/拼音/英文名/三字码）
</span>
        <ul>
            <li id="hot_city" class="k-state-active">热门</li>
            # for (var i=0; i<data.group.length; i++ ) { #
            <li>#= data.group[i] #</li>
            # } #
        </ul>
        <div id="hot_city_tab">
            <ul class="tcy_list clearfix">

                # for(var j=0;j<hotcitylist.length;j++){ #
                # var citylist_item = hotcitylist[j] #
                <li class="item" title="#= citylist_item.code #" data-code="#= citylist_item.code #">#= citylist_item.name #</li>
                # } #
            </ul>
        </div>

        # for(var i=0;i<data.citylist.length;i++){ #
        # var citylist_item = data.citylist[i] #
        <div class="city_tab">
            <ul class="tcy_list clearfix">
                # for(var k=0;k<data.group[i].length;k++){ #
                <li class="tcy_list_sep">#= data.group[i].split('')[k] #</li>
                # for(var j=0;j<citylist_item.value.length;j++){ #
                # var citylist_value_item = citylist_item.value[j]; #
                # if(citylist_value_item.py.slice(0,1) == data.group[i].split('')[k]) {#
                <li class="item" title="#= citylist_value_item.code #" data-code="#= citylist_value_item.code #">#= citylist_value_item.name #</li>
                # } #
                # } #
                # } #
            </ul>
        </div>

        # } #
    </div>
</script>
<script>
    $(function(){
        new FloatLayer({
            trigger:".customerInfo_Control",
            template:"#customerInfoControlTemplate",
            offsetX:-139,
            offsetY:18
        })

        $('.trip_type [type=radio]').on('change',function(){
            var that = $(this);
            if(that.hasClass('isDouble') && that.is(':checked')){
                $('.return_date').removeClass('disabled');
                $('.return_date input').prop('disabled',false);
            }else{
                $('.return_date').addClass('disabled');
                $('.return_date input').prop('disabled',true);
            }
        });

        $.role_ctype({
            changeClass:'current'
        });

        $('.ac-add-line').bind('click',function(){
            var container = $('.muti_trip tbody');
            var html = kendo.template($('#ac-add-line-template').html())({});
            container.append(html);
            // kendo.init(container);
            // container.find('[type=file]').eq(-1).kendoUpload(uploadsettings)
            reorder();
            createCityAc(container.find('tr').last().find('.city_ac'));
            if(container.find('tr').length>5){
                $(".row-add-line").hide();
                return false;
            }
        });
        function reorder(){
            $('.index_num').each(function(i){
                var t = $(this);
                t.text(i+1);
            });
        }

        function createCityAc(ele){
            CityAutocomplete({
                template: "#city_popup",
                input: ele,
                width: 200,
                // autocomplete:{
                //     dataSource:{
                //         transport:{
                //             read:{

                //             }
                //         }
                //     },
                //     placeholder:'三字吗/城市'
                // },
                // 以@分割热门非热门，以;分割条目，以|分割三字码拼音和中文
                url:'/static/js/data.txt',
                group: ["热门","GHJ", "ABCDEF", "KLMN", "PQSTW", "XYZ"]
            });
        }

        $('body').delegate('.ac-remove-line','click',function(){
            var t = $(this);
            if (t.closest('table').find('tr').length <= 2){
                //return alert('只剩一条了');
                return;
            }
            $(".row-add-line").show();
            t.closest('tr').remove();
            reorder();
        });

        createCityAc(".city_ac");

        kendo.init('body');


        function createSwfUpload(index,allowSize, allowFile){
            var upload = window.swfu = new SWFUpload({
                // Backend Settings
                upload_url: "/php/upload.php",
                post_params: {"name" : "testname"},
                // File Upload Settings
                //file_types : "*.*;",
                file_size_limit : allowSize ,
                file_types : allowFile ,
                file_types_description : "Choose Files",
                file_upload_limit : "0",
                file_queue_limit : "0",
                // Event Handler Settings (all my handlers are in the Handler.js file)
                file_dialog_start_handler : fileDialogStart,
                file_queued_handler : fileQueued,
                file_queue_error_handler : fileQueueError,
                file_dialog_complete_handler : fileDialogComplete,
                upload_start_handler : uploadStart,
                upload_progress_handler : uploadProgress,
                upload_error_handler : uploadError,
                upload_success_handler : uploadSuccess,
                upload_complete_handler : uploadComplete,
                // Button Settingsimg/fee
                // button_image_url : "/static/images/button_3_3_5.png",
                button_text : '<span class="text" style="color:white">上 传</span>',
                button_text_style : ".text{text-align:center;font-size:13px;}",
                button_text_top_padding: 5,

                button_placeholder_id : "UploaderPlaceholder_" + index,
                button_width: 55,
                button_height: 26,
                button_window_mode:"TRANSPARENT",
                button_cursor: SWFUpload.CURSOR.HAND,
                // Flash Settings
                flash_url : "/static/flash/swfupload.swf",
                custom_settings : {
                    progressTarget : "UploaderProgress_" + index,
                    cancelButtonId : "UploaderCancelBtn_" + index,
                    callback : function(file,serverData){
                        var tmp = $.parseJSON(serverData);
                    }
                },

                // Debug Settings
                debug: false
            });

            return upload;
        }

        var uploads = [];

        $(".Uploader").each(function(index){
            uploads.push(createSwfUpload(index + 1,$(this).attr("allowSize"),$(this).attr("allowFile")));
        });
        
        $(":radio[data-group=passenger_type]").change(function(){
            if($(this).attr("data-index")=="c2"){
                $(".uploader-wrapper").show();
                $(".pnr-notes").hide();
            }else{
                $(".uploader-wrapper").hide();
                $(".pnr-notes").show();
            }
        })
    })
</script>
</body>
</html>


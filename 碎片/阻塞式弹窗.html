<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    
    <style>
*{
    margin:0;
}
.window{
    position:fixed;
    display:none;
    width:100%;
    height:100%;
    background:rgba(0,0,0,.6);
} 
    </style>
</head>
<body>
   <div class="window">
        <button onclick="close_win()" style="font-size:40px">close</button>
   </div>
  <p>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eu magna vitae tellus vehicula fermentum vel sollicitudin mi. Suspendisse suscipit aliquet leo et mattis. Suspendisse in rhoncus mi. Morbi adipiscing sagittis nisl quis volutpat. Cras id lectus et justo blandit auctor. Fusce blandit nunc tempor risus aliquam, et consectetur nunc tempor. Quisque nec libero id nisl tincidunt convallis. Vivamus fringilla tellus lectus, non euismod lacus scelerisque id. Vivamus dignissim fringilla urna vitae dictum. Etiam sit amet velit sed magna facilisis tempus id nec felis. Donec a neque a neque tincidunt auctor vitae accumsan mi. Interdum et malesuada fames ac ante ipsum primis in faucibus. Suspendisse vulputate tortor quam, sit amet viverra sapien convallis eget. Sed vulputate tincidunt leo et pharetra. Aenean a nisl dui.
  </p>  
<button onclick="main()">run</button>
<input type="hidden" value="false" name="">
<script>
function main(){
    showWin(); 
    document.writeln('<h1>Hello World</h1>');   
} 


function showWin(){
    $('input').on('change',function(){
        main();
    });
    if($('input').val()=='false'){
        $('.window').show();
        throw Error('waiting');
    }else{
        $('.window').hide();
    }
}

function close_win(){
    $('input').val('true').trigger('change');
}

// function void_run(){
//     window.closs=false;
//     $('.window').show();
//     window.timestr = setInterval(function(){
//         console.log(closs);
//         if(window.closs){
//             console.log('pass'); 
//             $('.window').hide();
//             clearInterval(timestr);
//         }else{
//             throw Error('waiting');
//         }
//     },1000);
// 
//     throw Error('waiting');
// }
// 
// function close_win(){
//         console.log('close');
//     window.closs=true;
// }

</script>
</body>
</html>

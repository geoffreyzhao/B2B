<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>天地行 采购商 国内-首页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="../../static/css/store_reset.css" media="all" />
    <link rel="stylesheet" href="/static/css/toolkit.css"/>
    <link rel="stylesheet" href="/static/css/store_v2/store.css"/>
    <link rel="stylesheet" href="/static/css/store_v2/fhintro.css"/>
    
    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../static/js/global.js"></script>
    
    <!--[if IE]>
    <script src="../../static/js/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="headBG">
    <header class="main-header">
        <a class="logo" href="/"><h1>天地行</h1></a>
        <nav class="main-nav">
            <ul class="clearfix">
                <li class="active"><a herf="#">国内机票</a></li>
                <li><a herf="#">国际机票</a></li>
                <li><a herf="#">保险</a></li>
                <li><a herf="#">酒店</a></li>
                <li><a herf="#">机 + 酒</a></li>
                <li><a herf="#">旅游</a></li>
                <li><a herf="#">订单<i class="orderNum">10</i> </a></li>
            </ul>
        </nav>
    </header>
</div>
<div class="main-wrapper">
<section class="main-body clearfix">
<div class="scene s0"></div>
<div class="scene s1"></div>
<div class="scene s2"></div>
<div class="scene s3">
    <div class="s3_0"></div>
    <div class="s3_1"></div>
</div>
<script>
    function scrollScene(){
        this.animId = 0;
        this.eles = $('.scene');
        this.init();
    }
    scrollScene.prototype = {
        init:function(){
            var that = this;
            //that.hideScrollBar();
            window.onload = function(){
                that.scroll();
            };
            that.resize();
            that.stopAnim();
            that.setSceneDimension();
        },
        hideScrollBar:function(){
            $('body').css({overflow:'hidden'});
        },
        setSceneDimension:function(){
            var that = this;
            var eles = that.eles;

            eles.css({
                height:window.innerHeight,
                width:window.innerWidth
            });
        },
        getCurrentScene:function(){
            var that = this;
            var pos = that.getCurrentScrollPosition();
            var i = 0;
            var len = that.eles.length;
            var index,min,max;
            var baseHeight = window.innerHeight;
            var baseWidth = window.innerWidth;
            var firstEleOffsetTop = that.eles.eq(0).offset().top;

            for(;i<len;i++){
                if ( pos.y > i*baseHeight && pos.y < (i+1)*baseHeight ){
                    index = i;
                    break;
                }
            }

            //min = parseInt((index+1)*baseHeight+firstEleOffsetTop-baseHeight/2);
            //max = parseInt((index+2)*baseHeight+firstEleOffsetTop-baseHeight/2);
            min = parseInt((index+0)*baseHeight+firstEleOffsetTop);
            max = parseInt((index+1)*baseHeight+firstEleOffsetTop);

            return {
                index:index,
                base:index*baseHeight+firstEleOffsetTop,
                min:min,
                max:max
            };
        },
        getSceneDimension:function(){
            var that = this;
            var eles = that.eles;
        },
        getCurrentScrollPosition:function(){
            return {
                x:window.scrollX,
                y:window.scrollY
            }
        },
        scroll:function(){
            var that = this;
            $(window).on('scroll',function(){
                that.anim();
            });
        },
        anim:function(){
            var that = this;
            var pos = that.getCurrentScrollPosition();
            var current = that.getCurrentScene();
            var max = window.innerHeight;
            console.log(current);
            console.log(pos.y);
            if( pos.y > current.min && pos.y < current.max ){

            }else{
                //return that.stopAnim();
            }

            (function animloop(){
                that.animId = requestAnimationFrame(animloop);
                max--;
                if(max<0) return that.stopAnim();
                window.scrollBy(0,1);
            })();
        },
        resize:function(){
            var that = this;
            $(window).on('resize',function(){
                console.log('window resized,rebind,redimensiton');
                that.stopAnim();
                that.setSceneDimension();
            });
        },
        stopAnim:function(){
            cancelAnimationFrame(this.animId);
        }
    };

    $(function(){
        new scrollScene();
    });
</script>
</section> <!--body end-->
        <footer class="main-footer">
            <div class="footerContainer">
                <div class="xssl bottomQuickNav">
                    <i class="ico"></i>
                    <h3>新手上路</h3>
                    <ul>
                        <li><a href="#">用户手册</a></li>
                        <li><a href="#">QQ客服</a></li>
                        <li><a href="#">常见问题</a></li>
                    </ul>
                </div>
                <div class="zffs bottomQuickNav">
                    <i class="ico"></i>
                    <h3>支付方式</h3>
                    <ul>
                        <li><a href="#">支付宝支付</a></li>
                        <li><a href="#">汇付支付</a></li>
                        <li><a href="#">财付通支付</a></li>
                    </ul>
                </div>
                <div class="sjfw bottomQuickNav">
                    <i class="ico"></i>
                    <h3>商家服务</h3>
                    <ul>
                        <li><a href="#">客服电话</a></li>
                        <li><a href="#">航司电话</a></li>
                        <li><a href="#">出票时间</a></li>
                    </ul>
                </div>
                <div class="gywm bottomQuickNav">
                    <i class="ico"></i>
                    <h3>关于我们</h3>
                    <ul>
                        <li><a href="#">天地行介绍</a></li>
                        <li><a href="#">联系我们</a></li>
                    </ul>
                </div>
                <div class="kfrx bottomQuickNav last">
                    <i class="ico"></i>
                    <h4>
                        客服热线<br/>
                        <h2>400-720-6666</h2>
                    </h4>
                </div>
                <center class="copyright clearfix">
                    Copyright &copy; 2014 天地行 All Rights Reserved.     沪ICP备08101503号
                </center>
            </div>
        </footer>
<div class="partnerContainer">
    合作伙伴：
    <i class="travelsky partnerIcon"></i>
    <i class="elong partnerIcon"></i>
    <i class="qunar partnerIcon"></i>
    <i class="ctrip partnerIcon"></i>
    <i class="gta partnerIcon"></i>
</div>
</div>

</body>
</html>

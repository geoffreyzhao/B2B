<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>天地行 采购商 国内-首页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="../../static/css/store_reset.css" media="all" />
    <link rel="stylesheet" href="/static/css/toolkit.css"/>
    <link rel="stylesheet" href="/static/css/store_v2/store.css"/>
    <link rel="stylesheet" href="../static/css/store_v2/apphome.css"/>
    
    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../static/js/global.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.nav.js"></script>
    
    <!--[if IE]>
    <script src="../../static/js/html5.js"></script>
    <script src="../../static/js/vendor/IE7.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="headBG">
    <header class="main-header">
        <a class="logo" href="/"><h1>天地行</h1></a>
        <nav class="main-nav">
            <ul class="clearfix">
                <li class="active"><a herf="#">国内机票</a></li>
                <li><a herf="#">国际机票</a></li>
                <li><a herf="#">保险</a></li>
                <li><a herf="#">酒店</a></li>
                <li><a herf="#">机 + 酒</a></li>
                <li><a herf="#">旅游</a></li>
                <li><a herf="#">订单<i class="orderNum">10</i> </a></li>
            </ul>
        </nav>
    </header>
</div>
<div class="main-wrapper">
<section class="main-body clearfix app-body">
<div class="layerstar full"></div>
<div class="scene s0" id="section0">
    <div class="box">
        <div class="item item1"></div>
        <div class="item item2"></div>
        <div class="pic pic1"></div> 
        <div class="pic pic2"></div> 
        <div class="pic pic3"></div> 
    </div>
</div>
<div class="scene s1" id="section1">
    <div class="box">
        <div class="item item1" data-from="left"></div>
        <div class="item item2" data-from="top"></div>
        <div class="item item3" data-from="right"></div>
    </div>
</div>
<div class="scene s2" id="section2">
    <div class="box">
        <div class="item item1" data-from="top"></div>
        <div class="item item2" data-from="right"></div>
        <div class="item item3" data-from="bottom"></div>
    </div>
</div>
<div class="scene s3" id="section3">
    <div class="box">
        <div class="item item1" data-from="left"></div>
        <div class="item item2" data-from="bottom"></div>
        <div class="item item3" data-from="700,0"></div>
        <div class="item item4"></div>
    </div>
</div>
<div class="scene s4" id="section4">
    <div class="box">
        <div class="item item1" data-from="400,0"></div>
        <div class="item item2" data-from="right"></div>
        <div class="item item3" data-from="bottom"></div>
    </div>
</div>
<div class="scene s5" id="section5">
    <div class="box">
        <div class="item item1" data-from="left" data-delay="1000"></div>
        <div class="item item2" data-from="517,263" data-delay="1000" data-duration="1400"></div>
        <div class="item item3" data-from="93,490" data-delay="3000"></div>
        <div class="item item4" data-from="920,-100" data-delay="1000"></div>
        <div class="item item5" data-from="114,43" data-to="114,43"></div>
    </div>
</div>

 <ul class="mod-nav-list">
        <li class="current"><a href="#section0"></a></li>
        <li><a href="#section1"></a></li>
        <li><a href="#section2"></a></li>
        <li><a href="#section3"></a></li>
        <li><a href="#section4"></a></li>
        <li><a href="#section5"></a></li>
    </ul>

<script>

    $(function(){
        var nav = $('.mod-nav-list');
        var scene = $('.scene');
        var locked = false;
        var index;

        //窗口缩放
        ;(function(){
            $(window).on('resize',function(){
                setSceneDimension(scene);
            });

            function setSceneDimension(eles){
                eles.css({
                    height:window.innerHeight,
                    width:'100%'
                });
            }

            setSceneDimension(scene);
        })();

        ;(function(){
            nav.onePageNav({
                currentClass: 'current',
                changeHash: false,
                scrollSpeed: 750,
                scrollThreshold: 0.5,
                filter: '',
                begin:function(){
                    locked = true;
                },
                end:function(e){
                    locked = false;
                    index=nav.find('.current').index();
                    scene.eq(index).find('.item').randomSlideIn({
                        duration:1000,
                        callback:function(){
                            showBarCode();
                        }
                    }); 
                },
                easing: 'swing'
            });

            setTimeout(function(){
                index = nav.find('.current').index();
                scene.eq(index).prevAll('.scene').andSelf().find('.item').randomSlideIn({
                    duration:1000,
                    callback:function(){
                        if (index==3) showBarCode();
                    }
                }); 
            },500);
        })();
        
        ;(function(){
            var html = $('.s0 .box').html();
            var eles = $('.s0 .pic');
            var i=2;
            var duration = 1900;
            function callAf(){
                if(i<0) i=2;
                eles.eq(i-2).css({
                    'z-index':0
                })
                eles.eq(i-1).css({
                    'z-index':1,
                    'background-position-x':'207px'
                }).animate({
                    'background-position-x':'0px'
                },duration);
                eles.eq(i).css({
                    'z-index':2
                }).animate({
                    'background-position-x':'-207px'    
                },duration,function(){
                    $(this).css({
                        'background-position-x':'0px'
                    }); 
                    i--;
                    callAf();
                }); 
            }
            callAf();
        })();

        //鼠标滚轮控制
        ;(function(){
            $(window).on("mousewheel DOMMouseScroll", function(e){
                e.preventDefault(); 
                if(locked) return false;
                var currentScene = index;
                var delta = e.originalEvent.wheelDelta/120 || -e.originalEvent.detail/3;
                if(delta>0 && currentScene>0){
                    nav.find('a').eq(currentScene-1).click();
                };
                if(delta<0){
                    nav.find('a').eq(currentScene+1).click();
                };
            });
        })();

        function showBarCode(){
            var ele = $('.s3 .item4');
            if(ele.data('animated')){
                ele.css({
                    'left':308,
                    'top':306,
                    'display':'block' 
                });
            }else{
                ele.css({
                    'left':308,
                    'top':185,
                    'display':'block' 
                }).animate({
                    'left':308,
                    'top':306
                },800);
            }
            ele.data('animated',true);
        }

        posLayer();

        function posLayer(){
            var appbody = $('.app-body');
            var layerstar = $('.layerstar');
            $(window).on('scroll',function(e){
                appbody.css('background-position','0 -' + parseInt(window.scrollY/15) + 'px');
                layerstar.css('background-position','0 -' + parseInt(window.scrollY/4) + 'px');
            });
        }

    });
</script>

</section> <!--body end-->
        <footer class="main-footer tiny-footer">
	<center>
		<a href="/tops-front-purchaser/facade/about-tdx" target="_blank">关于我们</a>
		<i class="bar">|</i>
		<a href="/tops-front-purchaser/facade/service-center" target="_blank">服务中心</a>
		<i class="bar">|</i>
		<a href="/tops-front-purchaser/facade/contact-us" target="_blank">联系我们</a>
	</center>
	<center class="copyright">
		Copyright © 2014 天地行 All Rights Reserved. 沪ICP备08101503号
	</center>
</footer>
</div>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<title>系统设置 信息发布 采购商运营位 编辑</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../static/css/common.css" rel="stylesheet" type="text/css" />
    <link href="../../../static/css/kendo.common.css" rel="stylesheet" type="text/css" />
    <link href="../../../static/css/b2b.css" rel="stylesheet" type="text/css" />
    <link href="../../../static/css/kendo.reset.css" rel="stylesheet" type="text/css" />
    <link href="../../../static/css/information_publish.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../../static/js/kendo.web.js"></script>
    <!--<script type="text/javascript" src="../../../static/js/cultures/kendo.culture.zh-CN.min.js"></script>-->
    <!--<script type="text/javascript" src="../../../static/js/plugins/jquery.fixedBar.js"></script>-->
    <script type="text/javascript" src="../../../static/js/global.js"></script>
    
<!--[if lt IE 8]> 
<link rel="stylesheet" href="/static/css/ie.css" /> 
<script type="text/javascript" src="/static/js/vendor/IE7.min.js"></script> 
<![endif]-->
<script type="text/javascript" src="/static/js/sync.js"></script>
<!-- @CLB@ -->
</head>
<body>
    <div id="extHeader">
        <div></div>
    </div>

    <div id="container">
        <div class="header">
            <h1></h1>
            <div>
                <span>你好,${name}</span>
                <a href="javascript:void(0);">退出</a>
            </div>
            <ul id="top_menu">
                <li><a href="javascript:void(0);">国内机票</a></li>
                <li><a href="javascript:void(0);">国际机票</a></li>
                <li><a href="javascript:void(0);">酒店</a></li>
                <li><a href="javascript:void(0);">票证中心</a></li>
                <li><a href="javascript:void(0);">财务管理</a></li>
                <li><a href="javascript:void(0);">客户管理</a></li>
                <li class="current"><a href="javascript:void(0);">系统设置</a></li>
            </ul>
            <ol class="sub_menu">
                <li class="current"><a href="javascript:void(0);">公告信息</a></li>
                <li><a href="javascript:void(0);">公司信息</a></li>
                <li><a href="javascript:void(0);">组织架构</a></li>
                <li><a href="javascript:void(0);">角色维护</a></li>
                <li><a href="javascript:void(0);">基础数据</a></li>
            </ol>
            <div id="message">
            	<a href="javascript:void(0);">&nbsp;</a>
                <span>&nbsp;</span>
            </div>
        </div>
        <div class="clear"></div>
        <div id="sub_menu_bar"></div>
        <div id="mainContent">
            <div id="ac1" class="actions block">
                <div class="col col-l sep-r">
                    <a class="btns btn-return" href="#">返回</a>
                </div>
                <div class="col col-l">
                    <span class="page-title">酒店首页-资源推荐</span>
                </div>
                <div class="sep-l col col-r">
                    <a href="javascript:;" class="ac-new button_secondary adaptiveButton small">
                        <span class="left"></span>
                        <span class="center">记 录</span>
                        <span class="right"></span>
                    </a>
                </div>
            </div>



            <div id="citywrapper">
            <div class="add-city block">
                <div class="default-state">
                    <span data-bind="click:add_city.changeState"><i class="icon-add">+</i><span class="label">添加城市</span></span>
                </div>
                <div class="active-state" data-bind="invisible: add_city.isInvisible">
                    <span class="label">选择城市</span>
                    <input type="text" id="add_city_input" data-bind="value:add_city.tmpcity">
                    <a href="javascript:;" data-bind="click:add_city.addCity" class="ac-add button_important adaptiveButton medium">
                        <span class="left"></span>
                        <span class="center">添 加</span>
                        <span class="right"></span>
                    </a>
                </div>
            </div>

            <div class="city-blocks" data-template="city_block_template" data-bind="source:datalist"></div>

            <script type="template" id="city_block_template">
            <div class="block city-block">
                <div class="default-state">
                    <span class="city-name">#= cityName #</span> 
                    <span class="city-order">排序：<b>#= orderNum #</b></span> 
                    <span class="city-suggest">推荐酒店：<b>#= suggestCount #个</b></span>
                    <span data-bind="invisible:isEditing">
                        <span class="seemore">查看详情</span>
                        <a href="javascript:;" data-bind="click:edit_city.editCity" class="ac-edit button_secondary adaptiveButton medium">
                            <span class="left"></span>
                            <span class="center" style="padding:0 20px">编 辑</span>
                            <span class="right"></span>
                        </a>
                    </span>
                    <span data-bind="visible:isEditing">
                        <span class="label">选择酒店</span> 
                        <input type="text">
                        <a href="javascript:;" data-bind="click:edit_city.addHotel" class="button_secondary adaptiveButton small">
                            <span class="left"></span>
                            <span class="center">添 加</span>
                            <span class="right"></span>
                        </a>
                        
                        <span class="pull-right">
                        <a href="javascript:;" data-bind="click:edit_city.saveHotel" class="button_important adaptiveButton medium">
                            <span class="left"></span>
                            <span class="center">保 存</span>
                            <span class="right"></span>
                        </a>
                        <span class="bluelink">删除城市</span>
                        </span>
                    </span>
                </div> 
                <div class="active-state" data-bind="visible:isEditing">
                    fdsalkj 
                </div>
            </div>
            </script>
        </div>
<script>
(function(){

var source = [{
    cityName:'广州',
    orderNum: 1,
    suggestCount: 4
},{
    cityName:'北京',
    orderNum: 2,
    suggestCount: 4
}];

model = kendo.observable({
    datalist:[],
    add_city:{
        tmpcity:'',
        city:'',
        isInvisible:true,
        changeState:function(){
            var state = this.add_city.get('isInvisible');
            this.add_city.set('isInvisible',!state);
        },
        addCity:function(){
            this.add_city.set('isInvisible',true);
            this.add_city.set('city',this.tmpcity);
            this.add_city.set('tmpcity','');
            // get ajax data
            this.datalist.push({'cityname':this.city}); 
        }
    },
    edit_city:{
        currentEditItemNum:0,
        editCity:function(e){
            var data = e.data; 
            e.data.set('isEditing',true);
        },
        saveHotel:function(e){
            var data = e.data; 
            e.data.set('isEditing',false);
        },
        addHotel:function(){},
    }
});

if(source.length>0){
   model.set('datalist',source);
}

kendo.bind('#citywrapper',model);

})();
</script>

        </div> <!-- 内容结束 -->
          
    </div>
    
    <div id="extFooter">
        <div>
            <p>
                <a href="javascript:void(0);">关于我们</a>&nbsp;|
                <a href="javascript:void(0);">微博</a>&nbsp;|
                <a href="javascript:void(0);">服务条款</a>&nbsp;|
                <a href="javascript:void(0);">隐私政策</a>&nbsp;|
            </p>
            <p>客户服务热线:400-720-6666</p>
        </div>
    </div>
    <script>
        $(function(){
            new PopWindow('.ac-journal',{
                title:'提示',
                template:'#ac-journal-template',
                width:470
            }).init();
            kendo.init($("body"));
        })
    </script>
    
    <script type="text/x-kendo-template" id="ac-journal-template">
        <div class="journalContent">
            <table class="operation_records">
                <thead>
                    <tr>
                        <td>时间</td>
                        <td>操作内容</td>
                        <td>操作人</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2014/04/31   16：40</td>
                        <td>修改“广州-桂林”广告图</td>
                        <td>李晓明</td>
                    </tr>
                    <tr>
                        <td>2014/04/31   16：40</td>
                        <td>修改“广州-桂林”广告图</td>
                        <td>李晓明</td>
                    </tr>
                    <tr>
                        <td>2014/04/31   16：40</td>
                        <td>修改“广州-桂林”广告图</td>
                        <td>李晓明</td>
                    </tr>
                    <tr>
                        <td>2014/04/31   16：40</td>
                        <td>修改“广州-桂林”广告图</td>
                        <td>李晓明</td>
                    </tr>
                    <tr>
                        <td>2014/04/31   16：40</td>
                        <td>修改“广州-桂林”广告图</td>
                        <td>李晓明</td>
                    </tr>
                </tbody>
            </table>
            <div class="grid-table-pagination">
              <span class="grid-table-count">
                  共 <em>132</em> 条记录
              </span>
              <span>
                  <a href="javascript:void(0);" class="prev">&nbsp;</a>
              </span>
              <span class="links">
                  <a href="javascript:void(0);">1</a>
                  <a href="javascript:void(0);">2</a>
                  <a href="javascript:void(0);" class="current">3</a>
                  <a href="javascript:void(0);">4</a>
                  <a href="javascript:void(0);">5</a>
                  <a href="javascript:void(0);">...</a>
                  <a href="javascript:void(0);">50</a>
              </span>
              <span>
                  <a href="javascript:void(0);" class="next">&nbsp;</a>
              </span>
            </div>
        </div>
    </script>

<script type="text/x-kendo-template" id="city_popup">
<div class="tcy_tabstrip gn-tabstrip ">
<span class="tcy_title">
    热门城市/国家（支持中文名/拼音/英文名/三字码）
</span>
<ul>
<li id="hot_city" class="k-state-active">热门</li>
# for (var i=0; i<data.group.length; i++ ) { #
<li>#= data.group[i] #</li>
# } #
</ul>
<div id="hot_city_tab">
<ul class="tcy_list clearfix">

# for(var j=0;j<hotcitylist.length;j++){ #
# var citylist_item = hotcitylist[j] #
<li class="item" title="#= citylist_item.code #" data-code="#= citylist_item.code #">#= citylist_item.name #</li>
# } #
</ul>
</div>

# for(var i=0;i<data.citylist.length;i++){ #
# var citylist_item = data.citylist[i] #
<div class="city_tab">
<ul class="tcy_list clearfix">
  # for(var k=0;k<data.group[i].length;k++){ #
    <li class="tcy_list_sep">#= data.group[i].split('')[k] #</li>
    # for(var j=0;j<citylist_item.value.length;j++){ #
        # var citylist_value_item = citylist_item.value[j]; #
        # if(citylist_value_item.py.slice(0,1) == data.group[i].split('')[k]) {#
            <li class="item" title="#= citylist_value_item.code #" data-code="#= citylist_value_item.code #">#= citylist_value_item.name #</li>
        # } #
    # } #
  # } #
</ul>
</div>

# } #
</div>
</script>
<script>
CityAutocomplete({
    template: "#city_popup",
    input: "#add_city_input",
    // 以@分割热门非热门，以;分割条目，以|分割三字码拼音和中文
    url:'/static/js/data.txt',
    group: ["热门","GHJ", "ABCDEF", "KLMN", "PQSTW", "XYZ"]
});
</script>

   
</body>
</html>
